import{_ as f,r,f as m,c,a as s,h as l,t as e,F as g,i as p,o as a,n as x}from"./index-yVQeVJrV.js";const z="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='199.80px'%20viewBox='0%200%201025%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%233866d2'%20d='M944%20672l-86.112%200c-1.44-7.648-3.2-15.136-5.12-22.592l153.568-76.768c15.808-7.904%2022.176-27.136%2014.304-42.944-7.936-15.808-27.072-22.144-42.944-14.304l-146.496%2073.216c-55.872-120.576-177.76-204.608-319.2-204.608-172.224%200-315.68%20124.416-345.888%20288l-86.112%200c-44.096%200-80%2035.872-80%2080%200%2015.68%205.76%2030.816%2016.16%2042.528l111.84%20125.824%200%2023.648c0%2044.128%2035.904%2080%2080%2080l608%200c44.128%200%2080-35.872%2080-80l0-23.648%20111.808-125.824c10.432-11.712%2016.192-26.848%2016.192-42.528%200-44.128-35.872-80-80-80zM825.568%20672l-17.984%200%2015.936-8c0.608%202.688%201.472%205.28%202.048%208zM512%20416c128.928%200%20240%2076.8%20290.624%20186.912l-28.512%2014.24c-45.312-99.68-145.472-169.152-262.112-169.152-137.024%200-251.488%2095.776-280.64%20224l-32.896%200c29.728-145.888%20159.008-256%20313.536-256zM658.432%20672c-24.736-56.416-80.992-96-146.432-96s-121.664%2039.584-146.432%2096l-34.368%200c26.432-74.432%2097.376-128%20180.8-128%2078.88%200%20146.816%2047.872%20176.256%20116.064l-29.824%2011.936zM512%20640c-28.256%200-53.44%2012.512-71.04%2032l-39.168%200c22.208-38.048%2063.04-64%20110.208-64%2047.136%200%2088%2025.952%20110.176%2064l-39.2%200c-17.536-19.488-42.72-32-70.976-32zM512%20512c-101.28%200-186.944%2067.584-214.56%20160l-33.024%200c28.544-110.208%20128.544-192%20247.584-192%20103.872%200%20193.376%2062.336%20233.44%20151.488l-28.576%2014.272c-34.816-78.624-113.504-133.76-204.864-133.76zM832%20896l0%2048c0%208.832-7.2%2016-16%2016l-608%200c-8.832%200-16-7.168-16-16l0-48-128-144c0-8.832%207.168-16%2016-16l864%200c8.8%200%2016%207.168%2016%2016l-128%20144zM255.264%20374.784c-0.224-0.448-0.384-0.864-0.576-1.344-16.608-40.096-0.096-79.424%2014.816-114.912%2014.112-33.664%2026.624-63.488%2013.696-92.576-0.064-0.128-0.096-0.256-0.16-0.384-0.032-0.096-0.064-0.192-0.096-0.288-0.032-0.064-0.032-0.128-0.032-0.192-0.64-1.696-1.024-3.488-1.024-5.408%200-8.64%207.008-15.68%2015.68-15.68%206.656%200%2012.32%204.16%2014.592%2010.016%2017.856%2040.672%201.632%2080.672-13.504%20116.704-14.016%2033.344-25.408%2064.32-13.408%2092.544%200.064%200.224%200.064%200.416%200%200.64%200.352%201.28%200.576%202.624%200.576%204%200%208.864-7.2%2016.096-16.064%2016.096-6.208%200-11.52-3.52-14.176-8.64-0.032%200-0.064%200-0.064%200-0.096-0.192-0.16-0.384-0.256-0.576zM644.928%20370.112c-0.192-0.416-0.352-0.864-0.512-1.28-16.608-40.096-0.128-79.456%2014.752-114.944%2014.144-33.664%2026.624-63.488%2013.696-92.576%200-0.128-0.064-0.256-0.128-0.384s-0.064-0.192-0.128-0.288c0-0.064%200-0.128%200-0.192-0.608-1.696-1.056-3.488-1.056-5.408%200-8.64%207.04-15.68%2015.68-15.68%206.688%200%2012.32%204.128%2014.624%2010.016%2017.856%2040.672%201.632%2080.672-13.504%20116.704-14.016%2033.344-25.376%2064.32-13.44%2092.544%200.128%200.224%200.128%200.416%200.064%200.64%200.32%201.28%200.576%202.624%200.576%204%200%208.864-7.264%2016.096-16.128%2016.096-6.176%200-11.488-3.552-14.176-8.672l-0.064%200c-0.064-0.192-0.128-0.384-0.256-0.576zM480.608%20230.784c-0.224-0.448-0.384-0.864-0.608-1.312-16.64-40.096-0.128-79.456%2014.784-114.944%2014.112-33.664%2026.624-63.488%2013.696-92.576-0.032-0.128-0.096-0.256-0.128-0.384-0.032-0.096-0.064-0.192-0.096-0.288-0.032-0.064-0.032-0.128-0.032-0.192-0.64-1.696-1.024-3.488-1.024-5.408%200-8.64%207.04-15.68%2015.68-15.68%206.688%200%2012.32%204.16%2014.624%2010.048%2017.856%2040.672%201.632%2080.672-13.504%20116.704-14.016%2033.344-25.408%2064.32-13.408%2092.544%200.064%200.224%200.064%200.416%200%200.64%200.352%201.28%200.576%202.624%200.576%204%200%208.864-7.2%2016.096-16.064%2016.096-6.176%200-11.488-3.552-14.176-8.672-0.032%200-0.064%200-0.064%200-0.096-0.192-0.16-0.384-0.256-0.576z'%20/%3e%3c/svg%3e",y="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%233866d2'%20d='M776.533333%20560.761905c78.750476%200%20142.628571%2062.049524%20142.628572%20138.605714l-0.097524%204.876191c-1.755429%2045.83619-27.794286%2097.328762-70.582857%20149.577142-15.969524%2019.504762-33.133714%2037.692952-50.273524%2054.028191l-8.630857%208.045714c-1.389714%201.29219-2.730667%202.511238-4.047238%203.657143l-8.996572%207.850667-5.168762-4.437334a602.063238%20602.063238%200%200%201-66.779428-69.144381c-42.76419-52.248381-68.827429-103.740952-70.582857-149.552762l-0.073143-2.438095-0.024381-2.438095C633.904762%20622.811429%20697.782857%20560.761905%20776.533333%20560.761905zM316.952381%20170.666667v73.118476L268.190476%20243.809524v609.523809h362.910476c8.508952%2012.458667%2017.92%2024.990476%2028.208762%2037.546667%209.947429%2012.166095%2020.48%2024.064%2031.500191%2035.620571L268.190476%20926.47619a73.142857%2073.142857%200%200%201-73.142857-73.142857V243.809524a73.142857%2073.142857%200%200%201%2073.142857-73.142857h48.761905z%20m459.580952%20463.238095c-37.400381%200-67.193905%2027.623619-69.363809%2061.537524l-0.121905%203.925333%200.048762%202.072381c0.975238%2025.770667%2018.919619%2063.097905%2054.076952%20106.057143%204.924952%205.997714%2010.044952%2011.946667%2015.36%2017.846857l7.801905-8.899048%207.558095-8.97219c33.304381-40.667429%2051.151238-76.312381%2053.784381-101.863619l0.292572-4.144762%200.048762-2.096762c0-35.669333-30.646857-65.462857-69.485715-65.462857z%20m0%2028.745143a40.740571%2040.740571%200%201%201%200%2081.481143%2040.740571%2040.740571%200%200%201%200-81.481143zM560.761905%20560.761905v73.142857h-219.428572v-73.142857h219.428572z%20m195.047619-390.095238a73.142857%2073.142857%200%200%201%2073.142857%2073.142857v265.216a205.141333%20205.141333%200%200%200-73.142857-5.753905V243.809524h-48.761905V170.666667h48.761905z%20m-73.142857%20243.809523v73.142858H341.333333v-73.142858h341.333334zM585.142857%2097.52381a73.142857%2073.142857%200%200%201%2073.142857%2073.142857v48.761904a73.142857%2073.142857%200%200%201-73.142857%2073.142858h-146.285714a73.142857%2073.142857%200%200%201-73.142857-73.142858V170.666667a73.142857%2073.142857%200%200%201%2073.142857-73.142857h146.285714z%20m0%2073.142857h-146.285714v48.761904h146.285714V170.666667z'%20/%3e%3c/svg%3e",M="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%233866d2'%20d='M872%20394c4.4%200%208-3.6%208-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4%200-8%203.6-8%208v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4%200-8%203.6-8%208v166H152c-4.4%200-8%203.6-8%208v60c0%204.4%203.6%208%208%208h168v236H152c-4.4%200-8%203.6-8%208v60c0%204.4%203.6%208%208%208h168v166c0%204.4%203.6%208%208%208h64c4.4%200%208-3.6%208-8V706h228v166c0%204.4%203.6%208%208%208h64c4.4%200%208-3.6%208-8V706h164c4.4%200%208-3.6%208-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628%20630H400V394h228v236z'%20/%3e%3c/svg%3e",D="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%233866d2'%20d='M814.747826%206.678261%20209.252174%206.678261c-111.304348%200-202.573913%2091.269565-202.573913%20202.573913l0%20605.495652c0%20111.304348%2091.269565%20202.573913%20202.573913%20202.573913l605.495652%200c111.304348%200%20202.573913-91.269565%20202.573913-202.573913L1017.321739%20209.252174C1017.321739%2097.947826%20926.052174%206.678261%20814.747826%206.678261zM937.182609%20814.747826c0%2066.782609-53.426087%20120.208696-120.208696%20120.208696L209.252174%20934.956522c-66.782609%200-120.208696-53.426087-120.208696-120.208696L89.043478%20209.252174c0-66.782609%2053.426087-120.208696%20120.208696-120.208696l605.495652%200c66.782609%200%20120.208696%2053.426087%20120.208696%20120.208696L934.956522%20814.747826zM300.521739%20325.008696c-22.26087%200-40.069565%2017.808696-40.069565%2040.069565l0%20427.408696c0%2022.26087%2017.808696%2040.069565%2040.069565%2040.069565s40.069565-17.808696%2040.069565-40.069565L340.591304%20365.078261C340.591304%20342.817391%20322.782609%20325.008696%20300.521739%20325.008696zM512%20189.217391c-22.26087%200-40.069565%2017.808696-40.069565%2040.069565l0%20563.2c0%2022.26087%2017.808696%2040.069565%2040.069565%2040.069565s40.069565-17.808696%2040.069565-40.069565L552.069565%20231.513043C552.069565%20209.252174%20534.26087%20189.217391%20512%20189.217391zM723.478261%20449.669565c-22.26087%200-40.069565%2017.808696-40.069565%2040.069565l0%20302.747826c0%2022.26087%2017.808696%2040.069565%2040.069565%2040.069565%2022.26087%200%2040.069565-17.808696%2040.069565-40.069565L763.547826%20489.73913C763.547826%20467.478261%20745.73913%20449.669565%20723.478261%20449.669565z'%20/%3e%3c/svg%3e",V={class:"wx-page"},C={class:"wx-card"},k={class:"statistics-container"},L={class:"stat-item"},G={class:"stat-value"},T={class:"stat-item"},b={class:"stat-value"},B={key:0,class:"state-container loading-state"},S={key:1,class:"state-container error-state"},E={key:2,class:"feeding-list"},P={class:"feeding-item-header"},H={class:"person-icon"},N={class:"person-name"},I={class:"feeding-time"},O={class:"feeding-item-body"},U={class:"food-row"},W={class:"row-content"},Y={class:"food-main"},F={class:"food-name"},j={key:0,class:"food-category-tag"},q={key:0,class:"location-row"},A={class:"location-name"},J={key:1,class:"portion-row"},K={class:"portion-value"},Q={key:2,class:"notes-row"},R={class:"notes-value"},X={key:3,class:"score-row"},Z={class:"score-row-content"},$={class:"star-container"},s0={class:"score-value"},o0={__name:"history",setup(t0){const v=r([]),_=r(!1),d=r(""),i=r({today_count:0,avg_score:"-"});async function w(){_.value=!0,d.value="";try{const n=await fetch("http://localhost:3001/api/feedings");n.ok?v.value=await n.json():d.value="获取数据失败"}catch{d.value="网络错误，无法获取数据"}finally{_.value=!1}}async function u(){try{const n=await fetch("http://localhost:3001/api/stats");if(n.ok){const o=await n.json();i.value.today_count=o.today_count||0,i.value.avg_score=o.avg_rating!==void 0?o.avg_rating:"-"}else i.value={today_count:0,avg_score:"-"}}catch{i.value={today_count:0,avg_score:"-"}}}return m(()=>{w(),u()}),(n,o)=>(a(),c("div",V,[o[9]||(o[9]=s("div",{class:"wx-header"},[s("div",{style:{background:"none",color:"#2a73d9","font-weight":"800","font-size":"24px","padding-left":"0"}},"喂食记录历史")],-1)),s("div",C,[s("div",k,[s("div",L,[s("div",G,e(i.value.today_count),1),o[0]||(o[0]=s("div",{class:"stat-label"},"今日喂食",-1))]),s("div",T,[s("div",b,e(i.value.avg_score),1),o[1]||(o[1]=s("div",{class:"stat-label"},"平均评分",-1))])]),_.value?(a(),c("div",B,"加载中...")):l("",!0),d.value?(a(),c("div",S,e(d.value),1)):l("",!0),v.value.length?(a(),c("div",E,[(a(!0),c(g,null,p(v.value,t=>(a(),c("div",{key:t.record_id,class:"feeding-item-card"},[s("div",P,[s("div",H,e(t.person_name&&t.person_name[0]),1),s("span",N,e(t.person_name),1),s("span",I,e(t.feeding_time),1)]),s("div",O,[s("div",U,[o[2]||(o[2]=s("div",{class:"row-icon"},[s("img",{src:z,class:"sub-icon"})],-1)),s("div",W,[s("div",Y,[s("span",F,e(t.food_name),1),t.food_category?(a(),c("span",j,e(t.food_category),1)):l("",!0)])])]),t.location_name?(a(),c("div",q,[o[3]||(o[3]=s("div",{class:"row-icon"},[s("img",{src:y,class:"sub-icon"})],-1)),s("span",A,e(t.location_name),1)])):l("",!0),t.portion_size?(a(),c("div",J,[o[4]||(o[4]=s("div",{class:"row-icon"},[s("img",{src:M,class:"sub-icon"})],-1)),o[5]||(o[5]=s("div",{class:"portion-label"},"分量",-1)),s("div",K,e(t.portion_size)+" 克",1)])):l("",!0),t.notes?(a(),c("div",Q,[o[6]||(o[6]=s("div",{class:"row-icon"},[s("img",{src:D,class:"sub-icon"})],-1)),o[7]||(o[7]=s("div",{class:"notes-label"},"备注",-1)),s("div",R,e(t.notes),1)])):l("",!0),t.score?(a(),c("div",X,[o[8]||(o[8]=s("div",{class:"score-label"},"评分",-1)),s("div",Z,[s("span",$,[(a(),c(g,null,p(5,h=>s("span",{key:h,class:x(["star-icon",{active:h<=Math.round(t.score)}])},"★",2)),64))]),s("span",s0,e(t.score),1)])])):l("",!0)])]))),128))])):l("",!0)])]))}},e0=f(o0,[["__scopeId","data-v-c6a0e75d"]]);export{e0 as default};
